
# Use an Alpine Linux base image
Bootstrap: docker
From: alpine:latest

%environment
    export PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin

%post
    
    # Update and install required packages
    apk update && apk add --no-cache \
        build-base \
        go \
        git \
        linux-headers \
        libseccomp-dev \
        squashfs-tools \
        curl \
	apptainer
   
    git clone https://github.com/stela2502/Tutorial_Singularity.git
    mkdir /opt/ImageSmith
    cp -R Tutorial_Singularity/* /opt/ImageSmith
    ln /opt/ImageSmith/create_new_image_builder.sh /usre/bin

# Set default command for the container
%runscript
   echo "welcome to the ImageSmith apptainer production environment"
