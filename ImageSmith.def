
# Use an Alpine Linux base image
Bootstrap: docker
From: alpine:latest

%environment
    export PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/ImageSmith

%post
    
    # Update and install required packages
    apk update && apk add --no-cache \
        bash \
        build-base \
        go \
        git \
        linux-headers \
        libseccomp-dev \
        squashfs-tools \
        curl \
	apptainer
   
    git clone https://github.com/stela2502/Tutorial_Singularity.git
    mkdir /opt/ImageSmith
    cp -R Tutorial_Singularity/* /opt/ImageSmith

    cat <<EOF > /usr/local/bin/sudo
#!/bin/bash

# Check if the script is running as root
echo "sudo not necessary in image..."
"\$@"
EOF
   chmod +x /usr/local/bin/sudo

